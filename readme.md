# Industrial IoT Crane Monitor

This application is a predictive maintenance and decision support system for industrial cranes. It leverages real-time telemetry and AI analysis to provide actionable insights for three distinct roles: Owner, Maintenance Lead, and Technician.

## Overview

The system simulates crane sensor data (vibration, temperature, motor current, etc.) and uses an LLM (Gemini) to analyze anomalies. It provides a role-based interface to manage the entire maintenance lifecycle, from detection to resolution.

## Installation & Setup

1.  **Prerequisites**:
    *   Python 3.10+
    *   Google Gemini API Key

2.  **Install Dependencies**:
    ```bash
    pip install -r requirements.txt
    ```

3.  **Environment Variables**:
    Create a `.env` file in the root directory and add your API key:
    ```
    GOOGLE_API_KEY=your_api_key_here
    ```

4.  **Run the Application**:
    ```bash
    python app.py
    ```
    The application will start on `http://localhost:8080`.

## Role-Based Workflows

### 1. Owner Workflow (Executive View)
**Goal**: Monitor business impact and make high-level decisions.

1.  **Access Dashboard**: Navigate to `/owner`.
2.  **Monitor KPIs**: View real-time business metrics such as:
    *   **Uptime %**: Current operational efficiency.
    *   **Maintenance Spend vs. Budget**: Financial tracking.
    *   **Avoided Downtime Savings**: ROI from predictive actions.
3.  **Approve Requests**:
    *   Review high-value part requests from the Maintenance Lead.
    *   Click **Approve** to authorize purchases (updates inventory instantly).
4.  **Executive Decisions**:
    *   For critical alerts (e.g., "Main Bearing Failure Imminent"), review the risk assessment.
    *   Input a strategic decision (e.g., "Approve Emergency Downtime" or "Defer to Weekend").

### 2. Maintenance Lead Workflow (Tactical View)
**Goal**: Manage fleet health and inventory.

1.  **Access Dashboard**: Navigate to `/maintenance`.
2.  **Fleet Overview**: Monitor the aggregate health of all assets.
3.  **Inventory Management**:
    *   View current stock levels for critical parts (Bearings, Motors, Filters).
    *   If stock is low, submit a **Part Request** specifying the item and quantity.
4.  **Schedule Maintenance**:
    *   Review "Upcoming" and "Critical" events.
    *   Assign tasks to Technicians based on urgency scores.

### 3. Technician Workflow (Operational View)
**Goal**: Diagnose issues and execute repairs.

1.  **Access Dashboard**: Navigate to `/technician`.
2.  **Real-Time Diagnostics**:
    *   View live telemetry graphs (Vibration, Temperature, Motor Current).
    *   Click **"Run AI Diagnostic"** to trigger an analysis of the current sensor data.
3.  **Review AI Prescriptions**:
    *   Read the **Root Cause Analysis** and **Recommended Actions** generated by the system.
    *   Follow the step-by-step repair guide (e.g., "Inspect hydraulic line A4").
4.  **Execute & Verify**:
    *   Perform the recommended repair.
    *   Click **"Verify Fix"** to log the verification steps taken (e.g., "Pressure test passed").
5.  **Resolve Event**:
    *   Mark the event as **Resolved** and add closing notes for the audit log.

## Audit Log
Every action—from a sensor anomaly to a final repair—is logged in an immutable `audit_log`. This ensures full traceability of who did what and when, critical for compliance and post-incident reviews.